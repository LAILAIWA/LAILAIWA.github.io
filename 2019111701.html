<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="spring boot,oauth2,spring security," />





  <link rel="alternate" href="/atom.xml" title="沂水博客" type="application/atom+xml" />






<meta name="description" content="Spring Security OAuth2实战练习，内容包括：等。">
<meta name="keywords" content="spring boot,oauth2,spring security">
<meta property="og:type" content="article">
<meta property="og:title" content="Spring Security OAuth2">
<meta property="og:url" content="http://linyishui.top/2019111701.html">
<meta property="og:site_name" content="沂水博客">
<meta property="og:description" content="Spring Security OAuth2实战练习，内容包括：等。">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://pic-1258215793.cos.ap-shanghai.myqcloud.com/content/20191101/201911010138.jpg">
<meta property="og:updated_time" content="2019-12-26T12:52:05.703Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Spring Security OAuth2">
<meta name="twitter:description" content="Spring Security OAuth2实战练习，内容包括：等。">
<meta name="twitter:image" content="https://pic-1258215793.cos.ap-shanghai.myqcloud.com/content/20191101/201911010138.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://linyishui.top/2019111701.html"/>





  <title>Spring Security OAuth2 | 沂水博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">沂水博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">编程和心历记录</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />
            
            站点地图
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://linyishui.top/2019111701.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="沂水">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://pic-1258215793.cos.ap-shanghai.myqcloud.com/cover/riho_yoshioka1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="沂水博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Spring Security OAuth2</h1>
        

        <div class="post-meta">
          
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-11-17T15:53:56+08:00">
                2019-11-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/技术文档/" itemprop="url" rel="index">
                    <span itemprop="name">技术文档</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1,212
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  5
                </span>
              
            </div>
          

          
              <div class="post-description">
                  Spring Security OAuth2实战练习，内容包括：等。
              </div>
          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="Spring-Security-OAuth2"><a href="#Spring-Security-OAuth2" class="headerlink" title="Spring Security OAuth2"></a><strong>Spring Security OAuth2</strong></h1><h2 id="第一节-简介"><a href="#第一节-简介" class="headerlink" title="第一节 简介"></a><strong>第一节 简介</strong></h2><hr>
<h2 id="第二节-Spring新版本迁移"><a href="#第二节-Spring新版本迁移" class="headerlink" title="第二节 Spring新版本迁移"></a><strong>第二节 Spring新版本迁移</strong></h2><p>&emsp;&emsp;OAuth 2.0客户端和资源服务器从Spring Security OAuth 2.x移动到Spring Security 5.2.x的指南。由于<a href="https://github.com/spring-projects/spring-security" title="Title" target="_blank" rel="noopener">Spring Security</a>不提供授权服务器支持，因此迁移<a href="https://github.com/spring-projects/spring-security-oauth" title="Title" target="_blank" rel="noopener">Spring Security OAuth</a>授权服务器超出了本文档的范围</p>
<h3 id="2-1-客户端-Client"><a href="#2-1-客户端-Client" class="headerlink" title="2.1 客户端 Client"></a><strong>2.1 客户端 Client</strong></h3><p>&emsp;&emsp;通过添加@EnableOAuth2Client注释可以启用Spring Security OAuth对Authorization Code flow的支持，而其他的flows则需要构造并公开OAuth2ClientContext实例。</p>
<p>&emsp;&emsp;Spring Security的OAuth 2.0 Client则是通过oauth2Client的DSL方法启用支持的。</p>
<h4 id="2-1-1-RestTemplate-and-WebClient"><a href="#2-1-1-RestTemplate-and-WebClient" class="headerlink" title="2.1.1 RestTemplate and WebClient"></a><strong>2.1.1 RestTemplate and WebClient</strong></h4><p>&emsp;&emsp;Spring Security OAuth扩展了RestTemplate, 引入了OAuth2RestTemplate，这个类需要注册为@Bean并实例化。</p>
<p>&emsp;&emsp;Spring Security则选择了支持组合并提供了OAuth2AuthorizedClientService,用来帮助创建RestTemplate拦截器或WebClient交换过滤器函数。Spring Security同时为基于Servlet-和基于WebFlux-的应用程序提供了ExchangeFilterFunction。</p>
<h4 id="2-1-2-Simplified-Client-Resolution"><a href="#2-1-2-Simplified-Client-Resolution" class="headerlink" title="2.1.2 Simplified Client Resolution"></a><strong>2.1.2 Simplified Client Resolution</strong></h4><p>&emsp;&emsp;在Spring Security OAuth中检索当前授权的客户端，需要自动注入（autowire）OAuth2ClientContext实例。Spring Security OAuth通过Spring MVCs request以及session scope来存储OAuth2ClientContext实例。</p>
<p>&emsp;&emsp;在Spring Security中检索当前授权的客户端，需要@RegisteredOAuth2AuthorizedClient方法参数注解。Spring Security 把已授权的客户端存储在OAuth2AuthorizedClientRepository中。</p>
<h4 id="2-1-3-Enhanced-Client-Resolution"><a href="#2-1-3-Enhanced-Client-Resolution" class="headerlink" title="2.1.3 Enhanced Client Resolution"></a><strong>2.1.3 Enhanced Client Resolution</strong></h4><p>&emsp;&emsp;Spring Security OAuth通过Spring Boot properties配置单个客户端。</p>
<p>&emsp;&emsp;Spring Security使用ClientRegistrationRepository来表示客户端，客户端可以通过Spring Security DSL来提供或仍使用Spring Boot配置。</p>
<h4 id="2-1-4-Simplified-JWT-Support"><a href="#2-1-4-Simplified-JWT-Support" class="headerlink" title="2.1.4 Simplified JWT Support"></a><strong>2.1.4 Simplified JWT Support</strong></h4><p>&emsp;&emsp;Spring Security OAuth通过spring-security-jwt提供JWT支持。</p>
<p>&emsp;&emsp;Spring Security则依赖于Nimbus提供JWT支持。</p>
<h4 id="2-1-5-示例-Examples-Matrix"><a href="#2-1-5-示例-Examples-Matrix" class="headerlink" title="2.1.5 示例 Examples Matrix"></a><strong>2.1.5 示例 Examples Matrix</strong></h4><p>&emsp;&emsp;Spring Security和Spring Security OAuth2都提供了如何配置客户端的示例：</p>
<table>
<thead>
<tr>
<th style="text-align:left">用例</th>
<th style="text-align:left">Spring Security</th>
<th style="text-align:left">Spring Security OAuth</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Authorization Code</td>
<td style="text-align:left"><a href="https://github.com/jgrandja/spring-security-oauth-5-2-migrate" title="Title" target="_blank" rel="noopener">Sample</a></td>
<td style="text-align:left"><a href="https://github.com/jgrandja/spring-security-oauth-2-4-migrate" title="Title" target="_blank" rel="noopener">Sample</a></td>
</tr>
<tr>
<td style="text-align:left">Refresh Token</td>
<td style="text-align:left"><a href="https://github.com/jgrandja/spring-security-oauth-5-2-migrate" title="Title" target="_blank" rel="noopener">Sample</a></td>
<td style="text-align:left"><a href="https://github.com/jgrandja/spring-security-oauth-2-4-migrate" title="Title" target="_blank" rel="noopener">Sample</a></td>
</tr>
<tr>
<td style="text-align:left">Client Credentials</td>
<td style="text-align:left"><a href="https://github.com/jgrandja/spring-security-oauth-5-2-migrate" title="Title" target="_blank" rel="noopener">Sample</a></td>
<td style="text-align:left"><a href="https://github.com/jgrandja/spring-security-oauth-2-4-migrate" title="Title" target="_blank" rel="noopener">Sample</a></td>
</tr>
<tr>
<td style="text-align:left">Resource Owner Password Credentials</td>
<td style="text-align:left"><a href="https://github.com/jgrandja/spring-security-oauth-5-2-migrate" title="Title" target="_blank" rel="noopener">Sample</a></td>
<td style="text-align:left"><a href="https://github.com/jgrandja/spring-security-oauth-2-4-migrate" title="Title" target="_blank" rel="noopener">Sample</a></td>
</tr>
</tbody>
</table>
<h3 id="2-2-登录-Login"><a href="#2-2-登录-Login" class="headerlink" title="2.2 登录 Login"></a><strong>2.2 登录 Login</strong></h3><h4 id="2-2-1-方法变更-Changes-In-Approach"><a href="#2-2-1-方法变更-Changes-In-Approach" class="headerlink" title="2.2.1 方法变更 Changes In Approach"></a><strong>2.2.1 方法变更 Changes In Approach</strong></h4><p>&emsp;&emsp;Spring Security称呼此功能为OAuth 2.0 Login而Spring Security OAuth则称为SSO。</p>
<p>&emsp;&emsp;Spring Security OAuth的SSO支持通过添加@EnableOAuth2Sso注解开启。</p>
<p>&emsp;&emsp;Spring Security的OAuth 2.0 Login支持通过oauth2Login() DSL方法启用的。</p>
<h3 id="2-3-资源服务器-Resource-Server"><a href="#2-3-资源服务器-Resource-Server" class="headerlink" title="2.3 资源服务器 Resource Server"></a><strong>2.3 资源服务器 Resource Server</strong></h3><h4 id="2-3-1-方法变更-Changes-In-Approach"><a href="#2-3-1-方法变更-Changes-In-Approach" class="headerlink" title="2.3.1 方法变更 Changes In Approach"></a><strong>2.3.1 方法变更 Changes In Approach</strong></h4><p>&emsp;&emsp;Spring Security OAuth的资源服务器支持通过添加@EnableResourceServer注解开启。</p>
<p>&emsp;&emsp;Spring Security的资源服务器支持通过oauth2ResourceServer DSL方法启用的。</p>
<p>&emsp;&emsp;Spring Security OAuth为资源服务器提供了两种不同的DSL方法，通过扩展ResourceServerConfigurerAdapter来配置。</p>
<p>&emsp;&emsp;Spring Security通过Spring Security DSL提供相同的功能, 通过扩展WebSecurityConfigurerAdapter来配置。</p>
<p>&emsp;&emsp;Spring Security OAuth为具体授权规则指定了两个位置，第一个是通过ResourceServerConfigurerAdapter - 此处的任意规则都是为存在（present）的bearer token设定，第二个是通过WebSecurityConfigurerAdapter - 此处的任意规则都是为缺席（absent）的bearer token设定。</p>
<p>&emsp;&emsp;Spring Security则标明所有的授权规则都是通过一个或多个WebSecurityConfigurerAdapter配置而来的。</p>
<p>&emsp;&emsp;Spring Security OAuth提供了一个自定义的SpEL变量oauth2。为了基于scope去进行授权请求或方法, 可以编写一个表达式如access(“#oauth2.hasScope(‘scope’)”)。</p>
<p>&emsp;&emsp;Spring Security转换scope遵循授权命名规范。为了基于scope去进行授权请求或方法, 可以编写一个表达式如hasAuthority(“SCOPE_scope”)。</p>
<h4 id="2-3-2-示例-Examples-Matrix"><a href="#2-3-2-示例-Examples-Matrix" class="headerlink" title="2.3.2 示例 Examples Matrix"></a><strong>2.3.2 示例 Examples Matrix</strong></h4><table>
<thead>
<tr>
<th style="text-align:left">用例</th>
<th style="text-align:left">Spring Security</th>
<th style="text-align:left">Spring Security OAuth</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">JWT + JWK</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-security/tree/master/samples/boot/oauth2resourceserver" title="Title" target="_blank" rel="noopener">Sample</a></td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-security-oauth2-boot/tree/master/samples/spring-boot-sample-secure-oauth2-resource-jwt" title="Title" target="_blank" rel="noopener">Sample</a></td>
</tr>
<tr>
<td style="text-align:left">JWT + Key</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-security/tree/master/samples/boot/oauth2resourceserver-static" title="Title" target="_blank" rel="noopener">Sample</a></td>
<td style="text-align:left"><a href="https://docs.spring.io/spring-security-oauth2-boot/docs/current/reference/htmlsingle/#oauth2-boot-resource-server-jwt-single-key" title="Title" target="_blank" rel="noopener">Doc</a></td>
</tr>
<tr>
<td style="text-align:left">Opaque Token</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-security/tree/master/samples/boot/oauth2resourceserver-opaque" title="Title" target="_blank" rel="noopener">Sample</a></td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-security-oauth2-boot/tree/master/samples/spring-boot-sample-secure-oauth2-resource" title="Title" target="_blank" rel="noopener">Sample</a></td>
</tr>
<tr>
<td style="text-align:left">w/ Actuator</td>
<td style="text-align:left"><a href="https://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#multiple-httpsecurity" title="Title" target="_blank" rel="noopener">Doc</a></td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-security-oauth2-boot/tree/master/samples/spring-boot-sample-secure-oauth2-actuator" title="Title" target="_blank" rel="noopener">Sample</a></td>
</tr>
<tr>
<td style="text-align:left">Audience Validation</td>
<td style="text-align:left"><a href="https://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#oauth2resourceserver-jwt-validation-custom" title="Title" target="_blank" rel="noopener">Doc</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">Authorizing Requests</td>
<td style="text-align:left"><a href="https://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#oauth2resourceserver-jwt-authorization" title="Title" target="_blank" rel="noopener">Doc</a></td>
<td style="text-align:left"><a href="https://docs.spring.io/spring-security-oauth2-boot/docs/current/reference/htmlsingle/#oauth2-boot-resource-server-authorization" title="Title" target="_blank" rel="noopener">Doc</a></td>
</tr>
</tbody>
</table>
<h4 id="2-3-3-未移植功能-Unported-Features"><a href="#2-3-3-未移植功能-Unported-Features" class="headerlink" title="2.3.3 未移植功能 Unported Features"></a><strong>2.3.3 未移植功能 Unported Features</strong></h4><p>&emsp;&emsp;There are some features that we currently have no plans to port over.</p>
<p>&emsp;&emsp;In Spring Security OAuth, you can configure a UserDetailsService to look up a user that corresponds with the incoming bearer token. There are no plans for Spring Security’s Resource Server support to pick up a UserDetailsService. This is still simple in Spring Security, though, via the jwtAuthenticationConverter DSL method. Notably, one can return a BearerTokenAuthentication which takes an instance of OAuth2AuthenticatedPrincipal for a principal.</p>
<p>&emsp;&emsp;In Spring Security OAuth, you can assign an identifier to the resource server via the ResourceServerSecurityConfigurer#resourceId method. This configures the realm name used by the authentication entry point as well as adds audience validation. No such identifier is planned for Spring Security. However, audience validation and a custom realm name are both simple to achieve by configuring an OAuth2TokenValidator and AuthenticationEntryPoint respectively.</p>
<hr>
<h2 id="第一节-实战：实现单点登录"><a href="#第一节-实战：实现单点登录" class="headerlink" title="第一节 实战：实现单点登录"></a><strong>第一节 实战：实现单点登录</strong></h2><p>&emsp;&emsp;</p>
<hr>
<h2 id="第一节-实战：APP平台第三方应用授权"><a href="#第一节-实战：APP平台第三方应用授权" class="headerlink" title="第一节 实战：APP平台第三方应用授权"></a><strong>第一节 实战：APP平台第三方应用授权</strong></h2><p>&emsp;&emsp;首先在平台官网注册成为开发者。</p>
<p>&emsp;&emsp;然后注册应用信息，并搭建好项目。</p>
<p>&emsp;&emsp;OAuth时序图如下，通过OAuth来对接个人项目和APP平台，之后开发完毕后，只要保证提供一个稳定可用的线上版本即可。</p>
<p><img src="https://pic-1258215793.cos.ap-shanghai.myqcloud.com/content/20191101/201911010138.jpg" alt="OAuth时序图"></p>
<p>&emsp;&emsp;官网文档提供了OAuth2.0的authorize接口、access token接口、获取用户信息接口。</p>
<p>&emsp;&emsp;怎么通过Spring Security配置OAuth2 Client？找了一下Spring官网Demo：<a href="https://github.com/jgrandja/spring-security-oauth-5-2-migrate" title="Title" target="_blank" rel="noopener">OAuth-2.0-Migration-Guide</a>，直接按Demo来实现我们的需求。</p>
<p>&emsp;&emsp;代码就没必要再贴一遍了，了解OAuth2协议流程，对整个技术框架都会比较熟悉了，快速的实现需求后，再慢慢解决遇到的问题。</p>
<hr>
<p><em>参考博客和文章书籍等：</em></p>
<blockquote>
<p><a href="https://github.com/spring-projects/spring-security/wiki/OAuth-2.0-Migration-Guide" title="Title" target="_blank" rel="noopener">OAuth-2.0-Migration-Guide</a></p>
</blockquote>
<blockquote>
<p><a href="https://projects.spring.io/spring-security-oauth/docs/Home.html" title="Title" target="_blank" rel="noopener">spring-security-oauth</a></p>
</blockquote>
<blockquote>
<p><a href="https://mrbird.cc/Spring-Security-OAuth2-Guide.html" title="Title" target="_blank" rel="noopener">Spring Security OAuth2入门</a></p>
</blockquote>
<blockquote>
<p><a href="https://www.jianshu.com/p/cb886f995e86?utm_source=oschina-app" title="Title" target="_blank" rel="noopener">深入理解Spring Cloud Security OAuth2及JWT</a></p>
</blockquote>
<blockquote>
<p><a href="https://zhuanlan.zhihu.com/p/74267287" title="Title" target="_blank" rel="noopener">OAuth2实现单点登录SSO</a></p>
</blockquote>
<p><em>因博客主等未标明不可引用，若部分内容涉及侵权请及时告知，我会尽快修改和删除相关内容</em></p>

      
    </div>
    
    
    

    

    

    

    
      <div>
         ﻿<div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div>
    
</div>

      </div>
    


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/spring-boot/" rel="tag"># spring boot</a>
          
            <a href="/tags/oauth2/" rel="tag"># oauth2</a>
          
            <a href="/tags/spring-security/" rel="tag"># spring security</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019111601.html" rel="next" title="OAuth2协议框架">
                <i class="fa fa-chevron-left"></i> OAuth2协议框架
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019111801.html" rel="prev" title="AES加密">
                AES加密 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="https://pic-1258215793.cos.ap-shanghai.myqcloud.com/cover/riho_yoshioka1.jpg"
                alt="沂水" />
            
              <p class="site-author-name" itemprop="name">沂水</p>
              <p class="site-description motion-element" itemprop="description">记录编程点滴，写点生活中的酸甜</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">173</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">76</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/LAILAIWA" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:linyishui168@outlook.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://instagram.com/linyishui618" target="_blank" title="Instagram">
                      
                        <i class="fa fa-fw fa-instagram"></i>Instagram</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://weibo.com/u/5340162234" target="_blank" title="Weibo">
                      
                        <i class="fa fa-fw fa-weibo.com"></i>Weibo</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Spring-Security-OAuth2"><span class="nav-number">1.</span> <span class="nav-text">Spring Security OAuth2</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#第一节-简介"><span class="nav-number">1.1.</span> <span class="nav-text">第一节 简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第二节-Spring新版本迁移"><span class="nav-number">1.2.</span> <span class="nav-text">第二节 Spring新版本迁移</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-客户端-Client"><span class="nav-number">1.2.1.</span> <span class="nav-text">2.1 客户端 Client</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-1-RestTemplate-and-WebClient"><span class="nav-number">1.2.1.1.</span> <span class="nav-text">2.1.1 RestTemplate and WebClient</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-2-Simplified-Client-Resolution"><span class="nav-number">1.2.1.2.</span> <span class="nav-text">2.1.2 Simplified Client Resolution</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-3-Enhanced-Client-Resolution"><span class="nav-number">1.2.1.3.</span> <span class="nav-text">2.1.3 Enhanced Client Resolution</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-4-Simplified-JWT-Support"><span class="nav-number">1.2.1.4.</span> <span class="nav-text">2.1.4 Simplified JWT Support</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-5-示例-Examples-Matrix"><span class="nav-number">1.2.1.5.</span> <span class="nav-text">2.1.5 示例 Examples Matrix</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-登录-Login"><span class="nav-number">1.2.2.</span> <span class="nav-text">2.2 登录 Login</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-1-方法变更-Changes-In-Approach"><span class="nav-number">1.2.2.1.</span> <span class="nav-text">2.2.1 方法变更 Changes In Approach</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-资源服务器-Resource-Server"><span class="nav-number">1.2.3.</span> <span class="nav-text">2.3 资源服务器 Resource Server</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-1-方法变更-Changes-In-Approach"><span class="nav-number">1.2.3.1.</span> <span class="nav-text">2.3.1 方法变更 Changes In Approach</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-2-示例-Examples-Matrix"><span class="nav-number">1.2.3.2.</span> <span class="nav-text">2.3.2 示例 Examples Matrix</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-3-未移植功能-Unported-Features"><span class="nav-number">1.2.3.3.</span> <span class="nav-text">2.3.3 未移植功能 Unported Features</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第一节-实战：实现单点登录"><span class="nav-number">1.3.</span> <span class="nav-text">第一节 实战：实现单点登录</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第一节-实战：APP平台第三方应用授权"><span class="nav-number">1.4.</span> <span class="nav-text">第一节 实战：APP平台第三方应用授权</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        ﻿<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">沂水</span>

  
</div>

<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  本站访客数:<span id="busuanzi_value_site_uv"></span>
</span>
</div>

<!-- 
  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>

-->



        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    
   <script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"tagMode":true,"model":{"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"position":"left","width":125,"height":250},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/"});</script>

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

  
</body>
</html>
